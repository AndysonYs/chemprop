{% extends "layout.html" %}

{% block title %}
    <h1>Predict</h1>
{% endblock %}

{% block content %}
    <form enctype="multipart/form-data" method="POST">
        <h5>Model checkpoint (.pt file)</h5>
        <input type="file" name="checkpoint" accept=".pt" required>
        <br>
        <h5>SMILES (one per line)</h5>
        <textarea name="smiles" cols="100" rows="10" placeholder="smiles" required></textarea>
        <br>
        <input type="submit" value="Predict">
    </form>

    {% if error %}
        <h3>ERROR: {{ error }}</h3>
    {% endif %}

    {% if predicted %}
        <hr>

        <a href="{{ url_for('download_predictions') }}">
            <button class="btn btn-default btn-md">Download Predictions</button>
        </a>

        <br>
        <br>

        {% for i in range(num_smiles) %}
            <p>SMILES: {{ smiles[i] }}</p>

            {% for j in range(num_tasks) %}
                <p>{{ task_names[j] }}: {{ preds[i][j] }}</p>
            {% endfor %}

            <hr>
        {% endfor %}
    {% endif %}
{% endblock %}
